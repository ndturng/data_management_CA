<div class="container">
    <h2>Bộ ảnh của {{ officer.birth_name }}</h2>
    <div>
        <a href="{% url 'officer_detail' officer.pk %}"
        class="btn btn-secondary mt-3">Quay lại</a> |
        <a href="{% url 'url_image_create' officer.pk %}"
        class="btn btn-primary mb-3">Tải ảnh mới</a>
    </div>
    
    <select id="categoryDropdown"
            class="form-control mb-3"
            onchange="filterCategory()">
        <option value="">Tất cả</option>

        {% for key, label in category_labels.items %}
            <option value="{{ key }}" 
                {% if request.GET.category == key %}selected{% endif %}
                >{{ label }}</option>
        {% endfor %}

    </select>

    <div id="images"
         class="image-grid mt-3">

        {% for image in images %}
            <div class="image-item">
                <img src="{{ image.image.url }}"
                     alt="{{ image.description }}"
                     class="img-thumbnail"
                     style="max-width: 150px" />
                <p>{{ image.description }}</p>
                <a href="{{ image.image.url }}"
                   download
                   class="btn btn-sm btn-success">Download</a>
                <a href="{% url 'url_image_update' officer.pk image.pk %}"
                   class="btn btn-sm btn-warning">Cập nhật</a>
                <a href="{% url 'url_image_delete' officer.pk image.pk %}"
                   class="btn btn-sm btn-danger">Xoá</a>
            </div>
        {% empty %}
            <p>Không có ảnh nào trong danh mục này.</p>
        {% endfor %}

    </div>
</div>

<script>
    function filterCategory() {
        const category = document.getElementById("categoryDropdown").value;
        const url = new URL(window.location.href);
        url.searchParams.set("category", category);
        window.location.href = url.toString();
    }
</script>
